<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Munchkin Boo</title>
  <style>
    :root{
      --bg:#fafafa;
      --card:#ffffff;
      --text:#111;
      --muted:#666;
      --border:#e6e6e6;
      --primary:#111;
      --primaryText:#fff;
      --soft:#f0f0f0;
      --radius:18px;
    }
    body{
      margin:0;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .wrap{ width:min(520px, 100%); }
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:22px;
      box-shadow:0 6px 24px rgba(0,0,0,0.06);
    }
    h1{ margin:0 0 10px; font-size:1.35rem; }
    p{ margin:0; line-height:1.5; }
    .muted{ color:var(--muted); }
    .spacer{ height:14px; }
    .btn{
      width:100%;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--border);
      background:var(--soft);
      font-weight:800;
      cursor:pointer;
    }
    .btn.primary{
      background:var(--primary);
      color:var(--primaryText);
      border-color:transparent;
    }
    .row{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    input{
      width:100%;
      padding:12px 14px;
      border-radius:14px;
      border:1px solid var(--border);
      font-size:1rem;
      outline:none;
    }
    input:focus{ border-color:#cfcfcf; }
    .progress{
      display:flex;
      gap:6px;
      margin-bottom:14px;
    }
    .dot{
      height:8px;
      flex:1;
      border-radius:99px;
      background:#e9e9e9;
    }
    .dot.on{ background:#111; }
    .footerRow{
      display:flex;
      gap:10px;
      margin-top:12px;
    }
    .footerRow .btn{ flex:1; }
    .hidden{ display:none; }
    .bigEmoji{ font-size:2rem; }
    .summary{
      border:1px dashed var(--border);
      border-radius:14px;
      padding:12px;
      background:#fcfcfc;
      font-size:0.95rem;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <!-- progress dots: 6 steps -->
      <div class="progress" aria-hidden="true">
        <div class="dot" id="d1"></div>
        <div class="dot" id="d2"></div>
        <div class="dot" id="d3"></div>
        <div class="dot" id="d4"></div>
        <div class="dot" id="d5"></div>
        <div class="dot" id="d6"></div>
      </div>

      <!-- STEP 1 -->
      <section id="s1">
        <div class="bigEmoji">üåô‚ú®</div>
        <h1>Hi, I‚Äôm Munchkin Boo.</h1>
        <p class="muted">I‚Äôm your personal bedtime story and music application!</p>
        <div class="spacer"></div>
        <button class="btn primary" id="go1">Next</button>
      </section>

      <!-- STEP 2 -->
      <section id="s2" class="hidden">
        <h1>Press Start to begin</h1>
        <p class="muted">When you‚Äôre ready, tap start.</p>
        <div class="spacer"></div>
        <button class="btn primary" id="go2">Start</button>
        <div class="footerRow">
          <button class="btn" id="back2">Back</button>
        </div>
      </section>

      <!-- STEP 3 -->
      <section id="s3" class="hidden">
        <h1>What‚Äôs your name?</h1>
        <p class="muted">So I can personalise things for you.</p>
        <div class="spacer"></div>
        <input id="name" placeholder="Type your name‚Ä¶" autocomplete="given-name" />
        <div class="spacer"></div>
        <button class="btn primary" id="go3">Continue</button>
        <div class="footerRow">
          <button class="btn" id="back3">Back</button>
        </div>
      </section>

      <!-- STEP 4 -->
      <section id="s4" class="hidden">
        <h1>What mood are you in?</h1>
        <p class="muted">Choose one:</p>
        <div class="spacer"></div>
        <div class="row">
          <button class="btn" data-mood="Sleepy">üò¥ Sleepy</button>
          <button class="btn" data-mood="Hungry">üç™ Hungry</button>
        </div>
        <div class="spacer"></div>
        <button class="btn" data-mood="Naughty">üòà Naughty</button>

        <div class="footerRow">
          <button class="btn" id="back4">Back</button>
        </div>
      </section>

      <!-- STEP 5 -->
      <section id="s5" class="hidden">
        <h1>What would you like?</h1>
        <p class="muted">Would you like me to tell you a bedtime story or play you a song?</p>
        <div class="spacer"></div>
        <div class="row">
          <button class="btn primary" id="chooseStory">üìñ Bedtime story</button>
          <button class="btn primary" id="chooseSong">üéµ Song</button>
        </div>

        <div class="spacer"></div>
        <div class="summary" id="summary"></div>

        <div class="footerRow">
          <button class="btn" id="back5">Back</button>
        </div>
      </section>

      <!-- STEP 6 -->
      <section id="s6" class="hidden">
        <h1 id="finalTitle">Hello World‚Ä¶</h1>
        <p class="muted" id="finalBody"></p>
        <div class="spacer"></div>
        <button class="btn primary" id="restart">Restart</button>
      </section>
    </div>
  </div>

  <script>
    const state = {
      name: "",
      mood: "",
      choice: "" // "story" | "song"
    };

    // Steps & dots
    const steps = ["s1","s2","s3","s4","s5","s6"];
    const dots  = ["d1","d2","d3","d4","d5","d6"];

    function showStep(n){
      steps.forEach((id, i) => {
        document.getElementById(id).classList.toggle("hidden", i !== n);
      });
      dots.forEach((id, i) => {
        document.getElementById(id).classList.toggle("on", i <= n);
      });
    }

    function cleanName(input){
      const trimmed = (input || "").trim();
      const safe = trimmed.replace(/[^a-zA-Z '-]/g, "");
      return safe.slice(0, 30);
    }

    function updateSummary(){
      const name = state.name || "Friend";
      const mood = state.mood || "‚Äî";
      document.getElementById("summary").textContent =
        `Name: ${name}  ‚Ä¢  Mood: ${mood}`;
    }

    // Step 1 -> 2
    document.getElementById("go1").addEventListener("click", () => showStep(1));

    // Step 2
    document.getElementById("go2").addEventListener("click", () => showStep(2));
    document.getElementById("back2").addEventListener("click", () => showStep(0));

    // Step 3
    const nameInput = document.getElementById("name");

    // Remember name (nice touch)
    nameInput.value = localStorage.getItem("munchkin_name") || "";

    document.getElementById("go3").addEventListener("click", () => {
      const nm = cleanName(nameInput.value);
      if (!nm) {
        nameInput.focus();
        nameInput.placeholder = "Please enter a name üôÇ";
        return;
      }
      state.name = nm;
      localStorage.setItem("munchkin_name", nm);
      showStep(3);
    });
    document.getElementById("back3").addEventListener("click", () => showStep(1));

    // Step 4 mood buttons
    document.getElementById("s4").addEventListener("click", (e) => {
      const btn = e.target.closest("button[data-mood]");
      if (!btn) return;
      state.mood = btn.getAttribute("data-mood");
      updateSummary();
      showStep(4);
    });
    document.getElementById("back4").addEventListener("click", () => showStep(2));

    // Step 5 choose story/song
    document.getElementById("chooseStory").addEventListener("click", () => {
      state.choice = "story";
      renderHelloWorld();
      showStep(5);
    });
    document.getElementById("chooseSong").addEventListener("click", () => {
      state.choice = "song";
      renderHelloWorld();
      showStep(5);
    });
    document.getElementById("back5").addEventListener("click", () => showStep(3));

    function renderHelloWorld(){
      const title = document.getElementById("finalTitle");
      const body  = document.getElementById("finalBody");

      const name = state.name || "Friend";
      const mood = state.mood || "‚Äî";
      const choiceLabel = state.choice === "story" ? "a bedtime story" : "a song";

      title.textContent = "Hello World‚Ä¶";
      body.textContent = `Hi ${name}! You‚Äôre feeling ${mood}, and you chose ${choiceLabel}.`;
    }

    // When user chooses story/song, go to Step 6 (deliver)
    // (we do it after rendering)
    function showStep6(){
      renderHelloWorld();
      showStep(5); // step index 5 is s6
    }

    // Patch: move to step 6 when chosen
    document.getElementById("chooseStory").addEventListener("click", showStep6);
    document.getElementById("chooseSong").addEventListener("click", showStep6);

    // Restart
    document.getElementById("restart").addEventListener("click", () => {
      state.name = "";
      state.mood = "";
      state.choice = "";
      showStep(0);
    });

    // Initialize
    showStep(0);
    updateSummary();
  </script>
</body>
</html>
