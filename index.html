<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Munchkin Boo</title>

  <style>
    :root{
      --bg:#050A1A;          /* almost black navy */
      --card:#0B1433;        /* deep blue card */
      --text:#F4F6FF;        /* soft white */
      --muted:#A8B1D9;       /* muted lavender */
      --border:#1C2A5E;
      --primary:#7C6CFF;     /* friendly purple */
      --primaryText:#0B0F2A;
      --button:#121C46;
      --buttonHover:#18235C;
      --radius:20px;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
    }

    .wrap{ width:min(520px,100%); }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:26px;
      box-shadow:0 20px 40px rgba(0,0,0,.45);
    }

    h1{
      font-size:1.45rem;
      margin:0 0 10px;
      letter-spacing:.3px;
    }

    p{
      margin:0;
      line-height:1.6;
    }

    .muted{ color:var(--muted); }

    .spacer{ height:16px; }

    .btn{
      width:100%;
      padding:14px 16px;
      border-radius:16px;
      border:1px solid var(--border);
      background:var(--button);
      color:var(--text);
      font-weight:800;
      font-size:1rem;
      cursor:pointer;
      transition:background .15s ease, transform .05s ease;
    }

    .btn:hover{ background:var(--buttonHover); }
    .btn:active{ transform:translateY(1px); }

    .btn.primary{
      background:var(--primary);
      color:var(--primaryText);
      border:none;
    }

    .row{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }

    input{
      width:100%;
      padding:14px 16px;
      border-radius:16px;
      border:1px solid var(--border);
      background:#0E1840;
      color:var(--text);
      font-size:1rem;
      outline:none;
    }

    input::placeholder{ color:#7F88B8; }

    .hidden{ display:none; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">

      <!-- STEP 1: WELCOME + START -->
      <section id="step1">
        <h1>Hi, I‚Äôm Munchkin Boo üëã</h1>
        <p class="muted">
          I‚Äôm your personal bedtime story and music application.
        </p>

        <div class="spacer"></div>

        <p class="muted">Press start to begin.</p>

        <div class="spacer"></div>

        <button class="btn primary" id="startBtn">Start</button>
      </section>

      <!-- STEP 2: NAME -->
      <section id="step2" class="hidden">
        <h1>What‚Äôs your name?</h1>
        <p class="muted">So I can personalise things for you.</p>

        <div class="spacer"></div>

        <input id="nameInput" placeholder="Type your name‚Ä¶" />

        <div class="spacer"></div>

        <button class="btn primary" id="toMood">Continue</button>
      </section>

      <!-- STEP 3: MOOD -->
      <section id="step3" class="hidden">
        <h1>What mood are you in?</h1>
        <p class="muted">Choose one:</p>

        <div class="spacer"></div>

        <div class="row">
          <button class="btn" data-mood="Sleepy">üò¥ Sleepy</button>
          <button class="btn" data-mood="Hungry">üç™ Hungry</button>
        </div>

        <div class="spacer"></div>

        <button class="btn" data-mood="Naughty">üòà Naughty</button>
      </section>

      <!-- STEP 4: STORY OR SONG -->
      <section id="step4" class="hidden">
        <h1>What would you like?</h1>
        <p class="muted">
          Would you like me to tell you a bedtime story or play you a song?
        </p>

        <div class="spacer"></div>

        <div class="row">
          <button class="btn primary" id="chooseStory">üìñ Story</button>
          <button class="btn primary" id="chooseSong">üéµ Song</button>
        </div>
      </section>

      <!-- STEP 5: HELLO WORLD -->
      <section id="step5" class="hidden">
        <h1>Hello World‚Ä¶</h1>
        <p class="muted" id="finalText"></p>

        <div class="spacer"></div>

        <button class="btn primary" id="restart">Restart</button>
      </section>

    </div>
  </div>

  <script>
    const state = { name:"", mood:"", choice:"" };

    const steps = ["step1","step2","step3","step4","step5"];
    const show = id => steps.forEach(s =>
      document.getElementById(s).classList.toggle("hidden", s !== id)
    );

    document.getElementById("startBtn").onclick = () => show("step2");

    document.getElementById("toMood").onclick = () => {
      const name = document.getElementById("nameInput").value.trim();
      if(!name) return;
      state.name = name;
      show("step3");
    };

    document.getElementById("step3").onclick = e => {
      const btn = e.target.closest("[data-mood]");
      if(!btn) return;
      state.mood = btn.dataset.mood;
      show("step4");
    };

    document.getElementById("chooseStory").onclick = () => finish("story");
    document.getElementById("chooseSong").onclick = () => finish("song");

    function finish(type){
      state.choice = type;
      document.getElementById("finalText").textContent =
        `Hi ${state.name}! You‚Äôre feeling ${state.mood}, and you chose a ${type}.`;
      show("step5");
    }

    document.getElementById("restart").onclick = () => {
      Object.keys(state).forEach(k => state[k]="");
      document.getElementById("nameInput").value="";
      show("step1");
    };
  </script>
</body>
</html>

<script>
  let STORIES = [];

  async function loadStories() {
    const res = await fetch("./stories.json"); // important: relative path for GitHub Pages
    if (!res.ok) throw new Error("Could not load stories.json");
    const data = await res.json();
    STORIES = data.stories || [];
  }

  function pickRandom(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function getStoryByMood(mood) {
    const options = STORIES.filter(s => s.mood === mood);
    return options.length ? pickRandom(options) : null;
  }

  function renderStory(story, childName) {
    const safeName = (childName || "Friend").trim() || "Friend";

    const paragraphs = story.text
      .map(p => `<p>${p.replaceAll("{{name}}", safeName)}</p>`)
      .join("");

    document.getElementById("storyContainer").innerHTML = `
      <img src="${story.art}" alt="${story.title}"
           style="width:100%;max-width:520px;border-radius:16px;display:block;margin:0 auto 14px;" />
      <h2>${story.title}</h2>
      <div style="line-height:1.7">${paragraphs}</div>
    `;
  }

  // Call this once when the page loads
  loadStories().catch(console.error);
</script>

