<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Munchkin Boo</title>

<style>
/* ---------- base ---------- */
:root{
  --bg:#050A1A;
  --card:#0B1433;
  --text:#F4F6FF;
  --muted:#A8B1D9;
  --border:#1C2A5E;
  --primary:#7C6CFF;
  --radius:20px;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px;
}
.hidden{display:none!important}
.wrap{width:min(520px,100%)}
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  padding:26px;
  position:relative;
}
h1,h2{margin:0}
p{margin:0;line-height:1.6}
.btn{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#121C46;
  color:var(--text);
  font-weight:700;
  cursor:pointer;
}
.btn.primary{background:var(--primary);color:#0B0F2A;border:none}

/* ---------- summon icon ---------- */
#summonLauncher{
  position:fixed;
  top:14px;
  right:14px;
  width:54px;
  height:54px;
  border-radius:16px;
  background:#121C46;
  border:1px solid rgba(255,255,255,.12);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  cursor:pointer;
}
#summonLauncher img{width:30px;height:30px}

/* ---------- summon overlay ---------- */
#booOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.65);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:10000;
}
#booModal{
  width:min(560px,100%);
  background:#0B1433;
  border-radius:22px;
  border:1px solid rgba(255,255,255,.1);
  padding:18px;
}
#booLine{white-space:pre-wrap;line-height:1.7}
#booChoices{margin-top:14px;display:grid;gap:10px}

/* ---------- glow orb ---------- */
#glowWrap{display:flex;justify-content:center;margin-bottom:10px}
#glowOrb{
  width:96px;
  height:96px;
  border-radius:50%;
  background:
    radial-gradient(circle at 30% 30%,
      rgba(255,255,255,.6),
      rgba(124,108,255,.25) 40%,
      rgba(124,108,255,.12) 65%,
      transparent 75%);
  box-shadow:
    0 0 40px rgba(124,108,255,.35),
    0 0 90px rgba(124,108,255,.25);
}
#glowOrb.animate{
  animation: breathe 2.8s ease-in-out infinite;
}
#glowOrb.animate::before{
  content:"";
  position:absolute;
  inset:-30%;
  background:
    radial-gradient(circle at 20% 20%,
      rgba(255,255,255,.7),
      rgba(255,255,255,.2) 25%,
      transparent 60%);
  animation: orbit 4.5s linear infinite;
}

@keyframes breathe{
  0%{transform:scale(.9)}
  50%{transform:scale(1.05)}
  100%{transform:scale(.9)}
}
@keyframes orbit{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}
</style>
</head>

<body>

<button id="summonLauncher" class="hidden">
  <img src="assets/icon/summon-boo.png" alt="Summon Boo"/>
</button>

<div class="wrap">
<div class="card">

<section id="step1">
  <h1>Hi, Iâ€™m Munchkin Boo ðŸŒ™</h1>
  <p class="muted">Press start to begin.</p>
  <button class="btn primary" id="startBtn">Start</button>
</section>

<section id="step2" class="hidden">
  <h1>Your name?</h1>
  <input id="nameInput" placeholder="Nameâ€¦"/>
  <button class="btn primary" id="toMood">Continue</button>
</section>

<section id="step3" class="hidden">
  <h1>Choose a mood</h1>
  <button class="btn" data-mood="sleepy">ðŸ˜´ Sleepy</button>
</section>

<section id="step4" class="hidden">
  <h2>Story playingâ€¦</h2>
</section>

</div>
</div>

<!-- ---------- Summon Boo Overlay ---------- -->
<div id="booOverlay" class="hidden">
  <div id="booModal">
    <div id="glowWrap" class="hidden">
      <div id="glowOrb"></div>
    </div>
    <div id="booLine"></div>
    <div id="booChoices"></div>
  </div>
</div>

<script>
/* =========================================================
   INLINE SUMMON BOO SCENES (NO FETCH, NO PATH ISSUES)
   ========================================================= */
const SUMMON_DATA = {
  meta:{firstScene:"summon_root_1"},
  scenes: {
    summon_root_1:{
      lines:["Hi {{name}}â€¦ Iâ€™m right here ðŸ‘»\n\nWant a little help getting sleepy?"],
      choices:[
        {label:"Help me get sleepyâ€¦",goto:"sleepy_root_1"},
        {label:"Stay close, Booâ€¦",goto:"stay_close_1"},
        {label:"Back to the story",goto:"END_RETURN"}
      ]
    },
    sleepy_root_1:{
      lines:["Okayâ€¦ soft and slow.\n\nWhat do you want?"],
      choices:[
        {label:"Follow Booâ€™s glow",goto:"glow_1"},
        {label:"Back to the story",goto:"END_RETURN"}
      ]
    },
    glow_1:{
      lines:["Inâ€¦\n\nAnd outâ€¦"],
      choices:[
        {label:"Again",goto:"glow_1"},
        {label:"Back to the story",goto:"END_RETURN"}
      ]
    },
    stay_close_1:{
      lines:["Iâ€™m here.\n\nVery quietly."],
      choices:[
        {label:"Back to the story",goto:"END_RETURN"}
      ]
    }
  }
};

/* =========================================================
   STATE
   ========================================================= */
const state={
  step:"step1",
  name:"",
  summon:{scene:null}
};

/* =========================================================
   HELPERS
   ========================================================= */
function showStep(id){
  ["step1","step2","step3","step4"].forEach(s=>{
    document.getElementById(s).classList.toggle("hidden",s!==id);
  });
  document.getElementById("summonLauncher")
    .classList.toggle("hidden",!(id==="step3"||id==="step4"));
}
function fill(t){return t.replaceAll("{{name}}",state.name||"Friend")}

/* =========================================================
   SUMMON ENGINE
   ========================================================= */
const overlay=document.getElementById("booOverlay");
const lineEl=document.getElementById("booLine");
const choicesEl=document.getElementById("booChoices");
const glowWrap=document.getElementById("glowWrap");
const glowOrb=document.getElementById("glowOrb");

function renderSummon(id){
  if(id==="END_RETURN"){closeSummon();return;}
  const scene=SUMMON_DATA.scenes[id];
  state.summon.scene=id;

  glowWrap.classList.toggle("hidden",!id.startsWith("glow_"));
  glowOrb.classList.toggle("animate",id.startsWith("glow_"));

  lineEl.textContent=scene.lines.map(fill).join("\n\n");
  choicesEl.innerHTML="";
  scene.choices.forEach(c=>{
    const b=document.createElement("button");
    b.className="btn";
    b.textContent=c.label;
    b.onclick=()=>renderSummon(c.goto);
    choicesEl.appendChild(b);
  });
}

function openSummon(){
  overlay.classList.remove("hidden");
  renderSummon(SUMMON_DATA.meta.firstScene);
}
function closeSummon(){
  overlay.classList.add("hidden");
}

/* =========================================================
   WIRES
   ========================================================= */
document.getElementById("summonLauncher").onclick=openSummon;
overlay.onclick=e=>{if(e.target===overlay)closeSummon();};

document.getElementById("startBtn").onclick=()=>showStep("step2");
document.getElementById("toMood").onclick=()=>{
  state.name=document.getElementById("nameInput").value||"Friend";
  showStep("step3");
};
document.querySelector("[data-mood]").onclick=()=>showStep("step4");

showStep("step1");
</script>
</body>
</html>
