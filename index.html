<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Munchkin Boo</title>

  <style>
  :root{
    /* ===== Frost / Crystal Palette ===== */
    --bg0:#020617;          /* deep ice night */
    --bg1:#06102a;          /* glacier blue */
    --bg2:#0b1d4a;          /* aurora depth */

    --text:#F4F8FF;
    --muted:rgba(214,230,255,0.72);

    /* Glass surfaces */
    --glass: rgba(10, 24, 58, 0.42);
    --glass2: rgba(10, 24, 58, 0.30);
    --edge: rgba(255,255,255,0.14);
    --edge2: rgba(255,255,255,0.08);

    /* Crystal accents */
    --primary: #8FF3FF;     /* icy cyan */
    --primary2:#A8A0FF;     /* lilac ice */
    --primaryText:#041019;

    /* Controls */
    --button: rgba(14, 34, 78, 0.38);
    --buttonHover: rgba(18, 46, 110, 0.42);
    --input: rgba(10, 28, 66, 0.42);

    --radius:22px;

    /* ‚úÖ Audio tracks stored in CSS (read by JS) */
    --track-theme:   url("assets/music/theme-music.mp3");
    --track-shooting:url("assets/music/shooting-stars.mp3");
    --track-labour:  url("assets/music/labour-of-love.mp3");

    /* FX tuning */
    --blur: 18px;
    --shadow: 0 24px 70px rgba(0,0,0,.55);
  }

  *{ box-sizing:border-box; }

  body{
    margin:0;
    font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color:var(--text);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;

    /* Ice/Aurora base */
    background:
      radial-gradient(1100px 600px at 14% 12%, rgba(143,243,255,0.18), rgba(0,0,0,0) 55%),
      radial-gradient(900px 560px at 86% 22%, rgba(168,160,255,0.20), rgba(0,0,0,0) 60%),
      radial-gradient(900px 650px at 50% 110%, rgba(88,200,255,0.10), rgba(0,0,0,0) 65%),
      linear-gradient(180deg, var(--bg0), var(--bg1) 55%, var(--bg2));
    overflow-x:hidden;
  }

  /* =========================
     üåå Cosmic Starry Night BG
     (layout-safe: fixed layers)
     ========================= */

  /* Keep your existing body background gradients as-is.
     We only enhance the two fixed overlay layers. */

  body::before{
    content:"";
    position:fixed;
    inset:-2px;
    pointer-events:none;
    z-index:0;

    /* Star layers (different sizes + densities) + faint cosmic dust */
    background:
      /* tiny stars */
      radial-gradient(1px 1px at 8% 16%,  rgba(255,255,255,.70), rgba(0,0,0,0) 2px),
      radial-gradient(1px 1px at 18% 72%, rgba(255,255,255,.55), rgba(0,0,0,0) 2px),
      radial-gradient(1px 1px at 32% 28%, rgba(255,255,255,.62), rgba(0,0,0,0) 2px),
      radial-gradient(1px 1px at 56% 44%, rgba(255,255,255,.48), rgba(0,0,0,0) 2px),
      radial-gradient(1px 1px at 76% 18%, rgba(255,255,255,.66), rgba(0,0,0,0) 2px),
      radial-gradient(1px 1px at 90% 62%, rgba(255,255,255,.52), rgba(0,0,0,0) 2px),

      /* mid stars */
      radial-gradient(1.6px 1.6px at 14% 40%, rgba(210,240,255,.55), rgba(0,0,0,0) 3px),
      radial-gradient(1.6px 1.6px at 44% 12%, rgba(235,225,255,.50), rgba(0,0,0,0) 3px),
      radial-gradient(1.6px 1.6px at 68% 78%, rgba(215,245,255,.48), rgba(0,0,0,0) 3px),
      radial-gradient(1.6px 1.6px at 82% 36%, rgba(255,255,255,.46), rgba(0,0,0,0) 3px),

      /* bright ‚Äúglisten‚Äù stars */
      radial-gradient(2.2px 2.2px at 24% 22%, rgba(255,255,255,.85), rgba(0,0,0,0) 4px),
      radial-gradient(2.2px 2.2px at 62% 30%, rgba(255,255,255,.78), rgba(0,0,0,0) 4px),
      radial-gradient(2.2px 2.2px at 74% 58%, rgba(255,255,255,.70), rgba(0,0,0,0) 4px),

      /* subtle cosmic dust */
      radial-gradient(900px 520px at 18% 22%, rgba(143,243,255,.07), rgba(0,0,0,0) 62%),
      radial-gradient(820px 540px at 82% 28%, rgba(168,160,255,.08), rgba(0,0,0,0) 64%);

    opacity:.75;
    filter: blur(.15px);
    mix-blend-mode: screen;
    transform: translate3d(0,0,0);
    animation: starDrift 28s linear infinite;
  }

  /* Aurora + nebula glow + ultra-soft sparkle sheen */
  body::after{
    content:"";
    position:fixed;
    inset:-35%;
    pointer-events:none;
    z-index:0;

    background:
      /* nebula ‚Äúclouds‚Äù */
      radial-gradient(900px 700px at 30% 30%, rgba(168,160,255,.10), rgba(0,0,0,0) 60%),
      radial-gradient(820px 660px at 70% 40%, rgba(143,243,255,.09), rgba(0,0,0,0) 62%),
      radial-gradient(760px 640px at 55% 75%, rgba(255,255,255,.04), rgba(0,0,0,0) 65%),

      /* aurora sweep */
      conic-gradient(from 140deg at 50% 50%,
        rgba(143,243,255,0.16),
        rgba(168,160,255,0.14),
        rgba(255,255,255,0.05),
        rgba(143,243,255,0.12));

    opacity:.30;
    filter: blur(30px);
    mix-blend-mode: screen;
    transform: translate3d(0,0,0);
    animation: auroraDrift 16s ease-in-out infinite;
  }

  /* Ensure your UI stays above the fixed background layers */
  body > *{
    position:relative;
    z-index:1;
  }

  /* Gentle parallax drift */
  @keyframes starDrift{
    0%   { transform: translate(-1.5%, -1.0%); }
    50%  { transform: translate(1.5%,  1.0%); }
    100% { transform: translate(-1.5%, -1.0%); }
  }

  @keyframes auroraDrift{
    0%   { transform: translate(-4%, -2%) rotate(0deg); }
    50%  { transform: translate(4%, 3%) rotate(12deg); }
    100% { transform: translate(-4%, -2%) rotate(0deg); }
  }

  .wrap{ width:min(520px,100%); }
  @media (min-width: 768px){
    .wrap{ width:min(980px, 100%); }
  }

  /* ===== Crystal Glass Card ===== */
  .card{
    position:relative;
    border-radius:var(--radius);
    padding:26px;
    padding-top:70px;

    background:
      radial-gradient(900px 420px at 20% 12%, rgba(255,255,255,0.10), rgba(0,0,0,0) 55%),
      radial-gradient(700px 500px at 80% 40%, rgba(143,243,255,0.08), rgba(0,0,0,0) 62%),
      linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)),
      var(--glass);

    border:1px solid rgba(255,255,255,0.12);
    box-shadow: var(--shadow);
    backdrop-filter: blur(var(--blur));
    -webkit-backdrop-filter: blur(var(--blur));
    overflow:hidden;
  }

  /* Prism edge + shimmer sweep */
  .card::before{
    content:"";
    position:absolute;
    inset:-1px;
    border-radius:calc(var(--radius) + 1px);
    padding:1px;
    background:
      linear-gradient(120deg,
        rgba(255,255,255,0.20),
        rgba(143,243,255,0.20),
        rgba(168,160,255,0.18),
        rgba(255,255,255,0.10));
    -webkit-mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    opacity:.75;
    pointer-events:none;
  }

  .card::after{
    content:"";
    position:absolute;
    top:-40%;
    left:-60%;
    width:70%;
    height:180%;
    background: linear-gradient(90deg,
      rgba(255,255,255,0),
      rgba(255,255,255,0.10),
      rgba(143,243,255,0.08),
      rgba(255,255,255,0));
    transform: rotate(18deg);
    opacity:.55;
    animation: cardSheen 7.5s ease-in-out infinite;
    pointer-events:none;
    mix-blend-mode: screen;
  }

  @keyframes cardSheen{
    0%   { left:-80%; opacity:0.0; }
    18%  { opacity:.55; }
    50%  { left:120%; opacity:.35; }
    100% { left:120%; opacity:0.0; }
  }

  p{ margin:0; line-height:1.7; }
  .muted{ color:var(--muted); line-height:1.6; }
  .card > section > * + * { margin-top:14px; }

  h1{ font-size:1.45rem; margin:0; letter-spacing:.3px; text-shadow: 0 1px 14px rgba(143,243,255,0.10); }
  h2{ margin:0; font-size:1.25rem; letter-spacing:.2px; }

  /* ===== Crystal Buttons ===== */
  .btn{
    width:100%;
    padding:14px 16px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,0.14);
    background:
      radial-gradient(240px 120px at 20% 0%, rgba(255,255,255,0.12), rgba(0,0,0,0) 70%),
      linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)),
      var(--button);
    color:var(--text);
    font-weight:800;
    font-size:1rem;
    cursor:pointer;
    transition:background .15s ease, transform .08s ease, box-shadow .18s ease, filter .18s ease;
    text-decoration:none;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    position:relative;
    overflow:hidden;
    will-change: transform;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  /* specular highlight line */
  .btn::after{
    content:"";
    position:absolute;
    inset:0;
    background: linear-gradient(120deg,
      rgba(255,255,255,0) 0%,
      rgba(255,255,255,0.18) 30%,
      rgba(255,255,255,0) 60%);
    transform: translateX(-120%);
    opacity:.55;
    transition: transform .55s ease;
    pointer-events:none;
    mix-blend-mode: screen;
  }

  .btn:hover{
    background:
      radial-gradient(260px 140px at 22% 0%, rgba(255,255,255,0.14), rgba(0,0,0,0) 70%),
      linear-gradient(180deg, rgba(255,255,255,0.07), rgba(255,255,255,0.02)),
      var(--buttonHover);
    box-shadow:0 14px 34px rgba(0,0,0,.40), 0 0 0 1px rgba(255,255,255,.08) inset;
    filter:brightness(1.07) saturate(1.04);
  }
  .btn:hover::after{ transform: translateX(120%); }

  .btn:active{
    transform:translateY(1px) scale(0.985);
    box-shadow:0 8px 20px rgba(0,0,0,.30);
    filter:brightness(1.03);
  }

  .btn:focus-visible,
  input:focus-visible{
    outline:none;
    box-shadow:
      0 0 0 4px rgba(143,243,255,0.16),
      0 0 0 1px rgba(255,255,255,0.18) inset,
      0 18px 40px rgba(0,0,0,.35);
  }

  .btn.primary{
    border:1px solid rgba(255,255,255,0.12);
    color:var(--primaryText);
    background:
      radial-gradient(240px 140px at 20% 0%, rgba(255,255,255,0.26), rgba(0,0,0,0) 70%),
      linear-gradient(90deg, rgba(143,243,255,0.92), rgba(168,160,255,0.86));
  }

  .row{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:12px;
  }

  /* ===== Frosted Inputs ===== */
  input{
    width:100%;
    padding:14px 16px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,0.14);
    background:
      radial-gradient(220px 120px at 20% 0%, rgba(255,255,255,0.10), rgba(0,0,0,0) 70%),
      linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)),
      var(--input);
    color:var(--text);
    font-size:1rem;
    outline:none;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  input::placeholder{ color:rgba(214,230,255,0.55); }

  .hidden{ display:none !important; }

  .storyBody p{ margin:0 0 12px; }
  .storyBody p:last-child{ margin-bottom:0; }

  .fadeWrap{
    opacity: 1;
    transform: translateY(0);
    transition: opacity 260ms ease, transform 260ms ease;
    will-change: opacity, transform;
  }
  .fadeWrap.isFading{
    opacity: 0;
    transform: translateY(4px);
  }

  .topRow{
    display:flex;
    gap:10px;
    margin-top:12px;
  }
  .topRow .btn{ flex:1; }

  .status{
    margin-top:10px;
    font-size:0.85rem;
    color:rgba(214,230,255,0.60);
    opacity:0.95;
  }

  .uiTopBar{
    position:absolute;
    top:12px;
    right:12px;
    display:flex;
    gap:10px;
    align-items:center;
    justify-content:flex-end;
    z-index:5;
  }
  .uiTopBar .btn{
    width:auto;
    padding:10px 12px;
    border-radius:14px;
    font-weight:900;
    font-size:1.05rem;
    min-width:44px;
    white-space:nowrap;
  }

  @media (max-width: 420px){
    .card{ padding-top: 84px; }
    .uiTopBar .btn{
      padding: 8px 10px;
      font-size: 1rem;
      min-width: 40px;
    }
  }

  .choiceList{
    margin-top:14px;
    display:grid;
    gap:10px;
  }

  .pill{
    display:inline-block;
    font-size:0.8rem;
    color:rgba(214,230,255,0.70);
    border:1px solid rgba(255,255,255,0.14);
    padding:6px 10px;
    border-radius:999px;
    margin-bottom:10px;
    background: rgba(255,255,255,0.04);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .supportDivider{
    height:1px;
    background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.16), rgba(255,255,255,0));
    opacity:0.65;
    margin:18px 0 8px;
  }

  .copyright{
    margin-top:20px;
    text-align:center;
    font-size:0.7rem;
    color:rgba(214,230,255,0.55);
    opacity:0.9;
  }

  /* =========================
     üìñ Open-book Story Layout
     ========================= */
  .storyLayout{
    display:flex;
    flex-direction:column;
    gap:16px;
    position:relative;
  }
  .storyLeft{ flex:1; }
  .storyRight{ flex:1; min-width:0; }

  .storyArt{
    width:100%;
    aspect-ratio: 4 / 3;
    object-fit:cover;
    border-radius:16px;
    display:block;
    border:1px solid rgba(255,255,255,0.14);
    margin:0;
    box-shadow: 0 18px 50px rgba(0,0,0,0.35);
  }

  .storyScroll{ overflow:visible; }

  @media (min-width: 768px){
    .card{ padding-left: 28px; padding-right: 28px; }

    .storyLayout{
      flex-direction:row;
      align-items:stretch;
      gap:22px;
    }
    .storyLeft{ width:48%; }

    .storyRight{
      width:52%;
      height:520px;
      display:flex;
      flex-direction:column;
      position:relative;
    }
    .storyArt{
      aspect-ratio: 3 / 4;
      height: 520px;
      max-height: 520px;
    }
    .storyScroll{
      flex:1;
      overflow-y:auto;
      padding-right:10px;
    }
    .storyLayout::after{
      content:"";
      position:absolute;
      top:0;
      bottom:0;
      left:calc(48% + 11px);
      width:22px;
      pointer-events:none;
      background:
        radial-gradient(ellipse at center,
          rgba(0,0,0,.36) 0%,
          rgba(0,0,0,.18) 35%,
          rgba(0,0,0,0) 70%);
      opacity:.55;
      filter:blur(0.2px);
    }
  }

  /* =========================
     üëª Summon Boo Launcher
     ========================= */
  .summonLauncher{
    position:fixed;
    top:14px;
    right:14px;
    width:97px;
    height:97px;
    border-radius:18px;
    border:1px solid rgba(255,255,255,0.14);
    background:
      radial-gradient(240px 140px at 20% 0%, rgba(255,255,255,0.12), rgba(0,0,0,0) 70%),
      linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)),
      rgba(10, 24, 58, 0.38);
    box-shadow: 0 18px 46px rgba(0,0,0,.35);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:9999;
    cursor:pointer;
    transition: transform .08s ease, filter .18s ease, background .15s ease, box-shadow .18s ease;
    user-select:none;
    -webkit-tap-highlight-color: transparent;
  }
  .summonLauncher:hover{
    filter:brightness(1.10) saturate(1.05);
    box-shadow:0 24px 62px rgba(0,0,0,.45);
  }
  .summonLauncher:active{ transform:translateY(1px) scale(0.985); }
  .summonLauncher img{ width:110px; height:110px; display:block; }

  @media (max-width: 420px){
    .summonLauncher{ top:12px; right:12px; width:50px; height:50px; border-radius:15px; }
    .summonLauncher img{ width:28px; height:28px; }
  }

  /* =========================
     üëª Summon Boo Overlay + Modal (glassy)
     ========================= */
  .booOverlay{
    position:fixed;
    inset:0;
    background:rgba(2,6,20,0.68);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
    z-index:10000;
  }

  .booModal{
    width:min(560px, 100%);
    background:
      radial-gradient(900px 420px at 20% 10%, rgba(255,255,255,0.10), rgba(0,0,0,0) 55%),
      linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)),
      rgba(10, 24, 58, 0.60);
    border:1px solid rgba(255,255,255,0.14);
    border-radius:22px;
    box-shadow:0 30px 78px rgba(0,0,0,.58);
    overflow:hidden;
    position:relative;
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
  }

  .booHeader{
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:14px 16px 10px;
    border-bottom:1px solid rgba(255,255,255,0.10);
  }
  .booTitle{
    display:flex;
    align-items:center;
    gap:10px;
    font-weight:900;
    letter-spacing:.2px;
  }
  .booClose{
    width:auto;
    padding:10px 12px;
    border-radius:14px;
    font-weight:900;
    font-size:1rem;
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(255,255,255,0.04);
    color:var(--text);
    cursor:pointer;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  .booBody{
    padding:16px;
    display:grid;
    gap:12px;
  }
  .booLine{
    color:var(--text);
    line-height:1.7;
    white-space:pre-wrap;
  }
  .booChoices{
    display:grid;
    gap:10px;
    margin-top:4px;
  }

  /* =========================
     ‚ú® Glow Orb: make it more ‚Äúcrystal‚Äù
     ========================= */
  .glowWrap{
    display:flex;
    align-items:center;
    justify-content:center;
    padding:8px 0 2px;
  }
  .glowOrb{
    width:104px;
    height:104px;
    border-radius:999px;
    position:relative;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.18);
    background:
      radial-gradient(circle at 35% 30%,
        rgba(255,255,255,.55),
        rgba(143,243,255,.22) 45%,
        rgba(168,160,255,.14) 70%,
        rgba(0,0,0,0) 80%);
    box-shadow:
      0 0 38px rgba(143,243,255,.26),
      0 0 110px rgba(168,160,255,.18);
    opacity:0.98;
  }

  .glowOrb::before{
    content:"";
    position:absolute;
    inset:-35%;
    background:
      radial-gradient(circle at 25% 30%,
        rgba(255,255,255,.70),
        rgba(255,255,255,.20) 22%,
        rgba(143,243,255,.12) 42%,
        rgba(0,0,0,0) 60%);
    mix-blend-mode: screen;
    opacity:0.95;
    transform: translate(-10%, -12%) rotate(0deg);
    filter: blur(0.2px);
  }

  .glowOrb::after{
    content:"";
    position:absolute;
    inset:10%;
    border-radius:999px;
    background:
      conic-gradient(from 0deg,
        rgba(255,255,255,0.00),
        rgba(255,255,255,0.12),
        rgba(143,243,255,0.10),
        rgba(255,255,255,0.00));
    opacity:0.85;
    mix-blend-mode: screen;
  }

  .glowOrb.isBreathing{ animation: glowBreathe 2.8s ease-in-out infinite; }
  .glowOrb.isBreathing::before{ animation: glowOrbit 4.2s linear infinite; }

  @keyframes glowBreathe{
    0%   { transform: scale(0.88); filter:brightness(0.98) saturate(1.06); }
    45%  { transform: scale(1.06); filter:brightness(1.14) saturate(1.12); }
    100% { transform: scale(0.88); filter:brightness(0.98) saturate(1.06); }
  }
  @keyframes glowOrbit{
    0%   { transform: translate(-12%, -14%) rotate(0deg); }
    25%  { transform: translate(14%, -10%) rotate(90deg); }
    50%  { transform: translate(10%, 14%) rotate(180deg); }
    75%  { transform: translate(-14%, 10%) rotate(270deg); }
    100% { transform: translate(-12%, -14%) rotate(360deg); }
  }

  .booHint{
    font-size:0.85rem;
    color:rgba(214,230,255,0.78);
    text-align:center;
    margin-top:-2px;
  }

  /* small visible JS error banner */
  .jsErrorBanner{
    position:fixed;
    left:12px;
    right:12px;
    bottom:12px;
    background:rgba(255,60,90,0.18);
    border:1px solid rgba(255,60,90,0.35);
    color:#ffd3dc;
    padding:10px 12px;
    border-radius:14px;
    z-index:20000;
    font-size:0.85rem;
    line-height:1.35;
    box-shadow:0 14px 34px rgba(0,0,0,.40);
  }
  .jsErrorBanner code{
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    font-size:0.82rem;
    color:#fff;
  }

  /* Reduce motion for people who request it */
  @media (prefers-reduced-motion: reduce){
    body::after, .card::after, .btn::after, .glowOrb.isBreathing, .glowOrb.isBreathing::before{
      animation: none !important;
      transition: none !important;
    }
  }
</style>
</head>

<script data-goatcounter="https://munchkin-boo-2.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

<body>
  <!-- üëª Summon Boo Launcher -->
  <button id="summonLauncher" class="summonLauncher hidden" type="button" aria-label="Summon Boo">
    <img src="assets/icon/summon-boo.png" alt="" />
  </button>

  <div class="wrap">
    <div class="card">

      <div class="uiTopBar">
        <button id="trackBtn" class="btn" type="button" aria-label="Change music track">üéµ</button>
        <button id="muteBtn" class="btn" type="button" aria-label="Toggle sound">üîä</button>
      </div>

      <audio id="themePlayer" preload="none"></audio>

      <section id="step1">
        <h1>Hi, I‚Äôm Munchkin Boo ‚ú®üåô</h1>
        <p class="muted">I‚Äôm your personal bedtime story application.</p>
        <p class="muted">Press start to begin.</p>
        <button class="btn primary" id="startBtn" type="button">Start</button>
        <div class="status" id="loadStatus">Loading stories‚Ä¶</div>
        <div class="status" id="audioStatus"></div>
      </section>

      <section id="step2" class="hidden">
        <h1>What‚Äôs your name?</h1>
        <p class="muted">So I can personalise your story.</p>
        <input id="nameInput" placeholder="Type your name‚Ä¶" autocomplete="given-name" />
        <button class="btn primary" id="toMood" type="button">Continue</button>
        <button class="btn" id="backToWelcome" type="button">Back</button>
      </section>

      <section id="step3" class="hidden">
        <h1>What mood are you in?</h1>
        <p class="muted">Choose one:</p>

        <div class="row">
          <button class="btn" data-mood="sleepy" type="button">üò¥ Sleepy</button>
          <button class="btn" data-mood="hungry" type="button">üç™ Hungry</button>
        </div>

        <div class="row">
          <button class="btn" data-mood="naughty" type="button">üòà Naughty</button>
          <button class="btn" data-mood="adventure" type="button">üß≠ Adventure</button>
        </div>

        <button class="btn" id="backToName" type="button">Back</button>
      </section>

      <section id="step4" class="hidden">
        <div class="pill" id="modePill">Story</div>

        <div class="storyLayout">
          <div class="storyLeft">
            <img class="storyArt" id="storyArt" alt="" />
          </div>

          <div class="storyRight">
            <h2 id="storyTitle"></h2>

            <div class="storyScroll">
              <div class="fadeWrap" id="fadeWrap">
                <div class="storyBody" id="storyBody"></div>
                <div class="choiceList hidden" id="choiceList"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="topRow">
          <button class="btn primary" id="anotherStory" type="button">Another story</button>
          <button class="btn" id="changeMood" type="button">Change mood</button>
        </div>

        <button class="btn" id="restart" type="button">Restart Munchkin Boo</button>
      </section>

      <div class="supportDivider"></div>

      <footer class="copyright">
        ¬© <span id="year"></span> James Ritchie and www.boo-industries.com. All rights reserved. Contact: jamesalexritchie@outlook.com
      </footer>

    </div>
  </div>

  <!-- üëª Summon Boo Overlay -->
  <div id="booOverlay" class="booOverlay hidden" role="dialog" aria-modal="true" aria-label="Summon Boo">
    <div class="booModal">
      <div class="booHeader">
        <div class="booTitle">üëª <span>Summon Boo</span></div>
        <button id="booCloseBtn" class="booClose" type="button" aria-label="Close Summon Boo">‚úï</button>
      </div>

      <div class="booBody">
        <div id="glowWrap" class="glowWrap hidden">
          <div id="glowOrb" class="glowOrb"></div>
        </div>
        <div id="glowHint" class="booHint hidden">Watch the glow‚Ä¶ in‚Ä¶ and out‚Ä¶</div>

        <div id="booLine" class="booLine"></div>
        <div id="booChoices" class="booChoices"></div>
      </div>
    </div>
  </div>

  <script>
    // ======================
    // Visible JS error banner (so we never ‚Äúdo nothing‚Äù silently)
    // ======================
    function showJsErrorBanner(message){
      let el = document.getElementById("jsErrorBanner");
      if (!el) {
        el = document.createElement("div");
        el.id = "jsErrorBanner";
        el.className = "jsErrorBanner";
        document.body.appendChild(el);
      }
      el.innerHTML = `Something crashed in <b>index.html</b>.<br/><code>${String(message || "Unknown error")}</code>`;
    }

    window.addEventListener("error", (e) => {
      showJsErrorBanner(e?.message || e?.error?.message || "Unknown error");
    });

    window.addEventListener("unhandledrejection", (e) => {
      showJsErrorBanner(e?.reason?.message || e?.reason || "Unhandled promise rejection");
    });

    // ======================
    // App state
    // ======================
    const state = {
      name: "",
      mood: "",
      stories: [],
      lastStoryIdByMood: {},
      currentInteractiveStory: null,
      currentNodeId: null,

      track: localStorage.getItem("munchkin_track") || "theme",
      audioStarted: localStorage.getItem("munchkin_audio_started") === "true",

      summon: {
        data: null,
        overlayOpen: false,
        previousFocus: null,
        previousVolume: null,
        currentSceneId: null
      }
    };

    const steps = ["step1","step2","step3","step4"];

    // ======================
    // üëª Summon Boo scenes (INLINED from assets/boo/summonboo/scenes.json)
    // ======================
    const SUMMON_SCENES_DATA = {
      meta: {
        version: "1.0",
        firstScene: "summon_root_1"
      },
      scenes: {
        summon_root_1: {
          lines: [
            "Hi {{name}}‚Ä¶ I‚Äôm right here üëª\n\nWant a little help getting to sleep?"
          ],
          choices: [
            { label: "Help me get to sleep", goto: "sleepy_root_1" },
            { label: "Stay close to me", goto: "stay_close_1" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        sleepy_root_1: {
          lines: [
            "Okay‚Ä¶ let's take it easy.\n\nWhat do you want?"
          ],
          choices: [
            { label: "A night whisper", goto: "night_whisper_1" },
            { label: "Follow Boo‚Äôs glow", goto: "glow_1" },
            { label: "A cozy choice", goto: "cozy_choice_1" },
            { label: "A sleepy spell", goto: "sleepy_spell_1" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        night_whisper_1: {
          lines: [
            "That's it, {{name}}...\n\nYour bed is a little boat.\n\nAnd tonight, it stays perfectly still."
          ],
          choices: [
            { label: "Again", goto: "night_whisper_2" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        night_whisper_2: {
          lines: [
            "If a thought comes up‚Ä¶ that‚Äôs okay.\n\nWe can hold it or let it float away like a lantern in the sky..."
          ],
          choices: [
            { label: "Again", goto: "night_whisper_3" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        night_whisper_3: {
          lines: [
            "Gently breathe in... and out..."
          ],
          choices: [
            { label: "One more time", goto: "night_whisper_1" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        glow_1: {
          lines: [
            "Okay‚Ä¶ watch this little glow lamp as it fades in... and out..."
          ],
          choices: [
            { label: "Again", goto: "glow_2" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        glow_2: {
          lines: [
            "In‚Ä¶\n\nand out‚Ä¶ So very gently..."
          ],
          choices: [
            { label: "Again", goto: "glow_3" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        glow_3: {
          lines: [
            "Last one‚Ä¶\n\nIn‚Ä¶\n\nAnd out‚Ä¶\n\nThat's good..."
          ],
          choices: [
            { label: "Again", goto: "glow_1" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        cozy_choice_1: {
          lines: [
            "Where should Boo float?\n\nSomewhere cozy‚Ä¶"
          ],
          choices: [
            { label: "In the sky", goto: "cozy_blanket_1" },
            { label: "On the ocean", goto: "cozy_window_1" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        cozy_blanket_1: {
          lines: [
            "Okay‚Ä¶ up and away...\n\nIt‚Äôs warm here. Like a quiet hug."
          ],
          choices: [
            { label: "Again", goto: "cozy_blanket_2" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        cozy_blanket_2: {
          lines: [
            "Your toes can go floppy now.\n\nThen your knees.\n\nThen your cheeks."
          ],
          choices: [
            { label: "Again", goto: "cozy_choice_1" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        cozy_window_1: {
          lines: [
            "Okay‚Ä¶ On the waves of the ocean.\n\nThe night is doing its quiet work out here..."
          ],
          choices: [
            { label: "Again", goto: "cozy_window_2" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        cozy_window_2: {
          lines: [
            "The ocean is safe.\n\nThe waves are steady.\n\nI am resting gently against the shore."
          ],
          choices: [
            { label: "Again", goto: "cozy_choice_1" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        sleepy_spell_1: {
          lines: [
            "Okay‚Ä¶ say it with Boo (even in your head):\n\nSafe body.\nSoft pillow.\nQuiet room.\nSleepy you."
          ],
          choices: [
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        stay_close_1: {
          lines: [
            "I‚Äôm here.\n\nI‚Äôll float nearby‚Ä¶ very quietly."
          ],
          choices: [
            { label: "A tiny whisper", goto: "night_whisper_1" },
            { label: "Back to the story", goto: "return_to_story" }
          ]
        },

        return_to_story: {
          lines: [
            "Okay.\n\nBack to the story‚Ä¶ üëª"
          ],
          choices: [
            { label: "Continue", goto: "END_RETURN" }
          ]
        }
      }
    };

    // ======================
    // DOM refs
    // ======================
    const themePlayer = document.getElementById("themePlayer");
    const muteBtn = document.getElementById("muteBtn");
    const trackBtn = document.getElementById("trackBtn");
    const audioStatus = document.getElementById("audioStatus");

    const summonLauncher = document.getElementById("summonLauncher");
    const booOverlay = document.getElementById("booOverlay");
    const booCloseBtn = document.getElementById("booCloseBtn");
    const booLineEl = document.getElementById("booLine");
    const booChoicesEl = document.getElementById("booChoices");
    const glowWrap = document.getElementById("glowWrap");
    const glowOrb = document.getElementById("glowOrb");
    const glowHint = document.getElementById("glowHint");

    // ======================
    // Helpers
    // ======================
    function show(id){
      steps.forEach(s => document.getElementById(s).classList.toggle("hidden", s !== id));

      if (id !== "step4") {
        const choiceList = document.getElementById("choiceList");
        choiceList.classList.add("hidden");
        choiceList.innerHTML = "";
      }

      // ‚úÖ Only show Summon icon from Mood page onward
      summonLauncher.classList.toggle("hidden", !(id === "step3" || id === "step4"));
    }

    function cleanName(input){
      const trimmed = (input || "").trim();
      const safe = trimmed.replace(/[^a-zA-Z '-]/g, "");
      return safe.slice(0, 30) || "";
    }

    function pickRandom(arr){ return arr[Math.floor(Math.random() * arr.length)]; }

    function fillTemplate(text){
      const safeName = state.name || "Friend";
      return String(text || "").replaceAll("{{name}}", safeName);
    }

    // ======================
    // Stories
    // ======================
    function pickStoryForMood(mood){
      const options = state.stories.filter(s => s.mood === mood);
      if (!options.length) return null;

      const lastId = state.lastStoryIdByMood[mood] || null;
      if (options.length === 1) return options[0];

      let picked;
      do { picked = pickRandom(options); }
      while (picked.id === lastId);

      state.lastStoryIdByMood[mood] = picked.id;
      return picked;
    }

    function pickAnotherAdventureStory(){
      const adventures = state.stories.filter(s =>
        s.mood === "adventure" && s.type === "choose_your_own" && s.nodes && s.start
      );
      if (!adventures.length) return null;
      if (adventures.length === 1) return adventures[0];

      const currentId = state.currentInteractiveStory?.id || null;
      const options = adventures.filter(s => s.id !== currentId);
      return options.length ? pickRandom(options) : adventures[0];
    }

    function setModePill(text){
      document.getElementById("modePill").textContent = text;
    }

    function renderArtTitle(story){
      const art = document.getElementById("storyArt");
      art.onerror = () => console.log("Image failed to load:", art.src);
      art.src = story.art || "";
      art.alt = story.title || "";
      document.getElementById("storyTitle").textContent = story.title || "";
    }

    function renderParagraphs(paragraphArray){
      const body = document.getElementById("storyBody");
      body.innerHTML = (paragraphArray || []).map(p => `<p>${fillTemplate(p)}</p>`).join("");
    }

    function fadeUpdate(renderFn){
      const el = document.getElementById("fadeWrap");
      if (!el) { renderFn(); return; }
      el.classList.add("isFading");
      window.setTimeout(() => {
        renderFn();
        requestAnimationFrame(() => el.classList.remove("isFading"));
      }, 260);
    }

    function startInteractiveStory(story){
      state.currentInteractiveStory = story;
      state.currentNodeId = story.start;

      setModePill("Adventure");
      document.getElementById("anotherStory").textContent = "Another adventure";

      const choiceList = document.getElementById("choiceList");
      choiceList.classList.remove("hidden");

      renderArtTitle(story);
      fadeUpdate(() => renderInteractiveNode(true));
    }

    function renderInteractiveNode(skipFade=false){
      const story = state.currentInteractiveStory;
      if (!story || !story.nodes) return;

      const node = story.nodes[state.currentNodeId];
      if (!node) return;

      const doRender = () => {
        renderParagraphs(node.text || []);

        const choiceList = document.getElementById("choiceList");
        choiceList.innerHTML = "";

        const choices = node.choices || [];
        if (choices.length === 0) {
          choiceList.classList.add("hidden");
        } else {
          choiceList.classList.remove("hidden");
          choices.forEach(ch => {
            const btn = document.createElement("button");
            btn.className = "btn";
            btn.type = "button";
            btn.textContent = ch.label;
            btn.addEventListener("click", () => {
              state.currentNodeId = ch.next;
              renderInteractiveNode();
            });
            choiceList.appendChild(btn);
          });
        }
      };

      if (skipFade) doRender();
      else fadeUpdate(doRender);
    }

    function stopInteractiveStoryState(){
      state.currentInteractiveStory = null;
      state.currentNodeId = null;

      const choiceList = document.getElementById("choiceList");
      choiceList.classList.add("hidden");
      choiceList.innerHTML = "";
    }

    function renderNormalStory(story){
      stopInteractiveStoryState();
      setModePill("Story");
      document.getElementById("anotherStory").textContent = "Another story";

      renderArtTitle(story);
      fadeUpdate(() => renderParagraphs(story.text || []));
    }

    function showNoStories(mood){
      stopInteractiveStoryState();
      setModePill("Story");
      document.getElementById("anotherStory").textContent = "Another story";

      document.getElementById("storyTitle").textContent = "No stories yet";
      fadeUpdate(() => {
        document.getElementById("storyBody").innerHTML =
          `<p class="muted">No stories found for mood: ${mood}</p>`;
      });

      document.getElementById("storyArt").src = "";
      document.getElementById("storyArt").alt = "";
    }

    async function loadStories(){
      const status = document.getElementById("loadStatus");
      try {
        const res = await fetch("./stories.json", { cache: "no-store" });
        if (!res.ok) throw new Error("stories.json not found");
        const data = await res.json();
        state.stories = data.stories || [];
        status.textContent = ``;
      } catch (err) {
        console.error(err);
        status.textContent = "Couldn‚Äôt load stories. Check stories.json is in the repo root.";
      }
    }

    // ======================
    // AUDIO
    // ======================
    function readCssAudioUrl(varName){
      const raw = getComputedStyle(document.documentElement).getPropertyValue(varName).trim();
      return raw.replace(/^url\((['"]?)(.*?)\1\)$/i, "$2");
    }

    const TRACKS = {
      theme:    readCssAudioUrl("--track-theme")   || "assets/music/theme-music.mp3",
      shooting: readCssAudioUrl("--track-shooting")|| "assets/music/shooting-stars.mp3",
      labour:   readCssAudioUrl("--track-labour")  || "assets/music/labour-of-love.wav"
    };
    const TRACK_ORDER = ["theme", "shooting", "labour"];

    themePlayer.addEventListener("error", () => {
      const code = themePlayer.error?.code;
      const msg =
        code === 1 ? "MEDIA_ERR_ABORTED" :
        code === 2 ? "MEDIA_ERR_NETWORK" :
        code === 3 ? "MEDIA_ERR_DECODE (format/codec)" :
        code === 4 ? "MEDIA_ERR_SRC_NOT_SUPPORTED" :
        "Unknown audio error";
      audioStatus.textContent = "Audio error: " + msg;
    });

    themePlayer.addEventListener("playing", () => { audioStatus.textContent = ""; });
    themePlayer.addEventListener("waiting", () => { audioStatus.textContent = "Loading sound‚Ä¶"; });

    themePlayer.muted = (localStorage.getItem("munchkin_muted") === "true");
    function updateMuteButton(){ muteBtn.textContent = themePlayer.muted ? "üîá" : "üîä"; }
    function updateTrackButton(){ trackBtn.textContent = "üéµ"; }
    updateMuteButton(); updateTrackButton();

    muteBtn.addEventListener("click", () => {
      themePlayer.muted = !themePlayer.muted;
      localStorage.setItem("munchkin_muted", themePlayer.muted);
      updateMuteButton();
    });

    function applyTrack(trackKey){
      if (!TRACKS[trackKey]) trackKey = "theme";
      state.track = trackKey;
      localStorage.setItem("munchkin_track", state.track);

      themePlayer.pause();
      themePlayer.src = TRACKS[trackKey];
      themePlayer.loop = true;
      themePlayer.volume = 0.5;
      themePlayer.load();
      updateTrackButton();
    }

    async function tryPlay(){
      try {
        await themePlayer.play();
        audioStatus.textContent = "";
        state.audioStarted = true;
        localStorage.setItem("munchkin_audio_started", "true");
      } catch (err) {
        audioStatus.textContent = "If sound doesn‚Äôt begin, tap Sound on, then tap Start again.";
      }
    }

    function nextTrackKey(current){
      const i = TRACK_ORDER.indexOf(current);
      return TRACK_ORDER[(i + 1) % TRACK_ORDER.length];
    }

    trackBtn.addEventListener("click", async () => {
      const next = nextTrackKey(state.track);
      applyTrack(next);
      if (state.audioStarted) await tryPlay();
    });

    async function startThemeMusic(){ applyTrack(state.track); await tryPlay(); }
    function stopThemeMusic(){ themePlayer.pause(); themePlayer.currentTime = 0; }

    // ======================
    // üëª SUMMON BOO (works with your scenes.json schema)
    // Now INLINED: no fetch call.
    // ======================
    function isGlowScene(sceneId){
      return typeof sceneId === "string" && sceneId.startsWith("glow_");
    }

    function setGlowVisible(isVisible, hintText){
      glowWrap.classList.toggle("hidden", !isVisible);
      glowHint.classList.toggle("hidden", !isVisible);

      if (isVisible) {
        glowOrb.classList.add("isBreathing");
        glowHint.textContent = hintText || "Watch the glow‚Ä¶ in‚Ä¶ and out‚Ä¶";
      } else {
        glowOrb.classList.remove("isBreathing");
        glowHint.textContent = "";
      }
    }

    function renderSummonScene(sceneId){
      const data = state.summon.data;
      const scene = data?.scenes?.[sceneId];

      if (!scene) {
        setGlowVisible(false);
        booLineEl.textContent =
          "Boo can‚Äôt find that scene.\n\nMissing:\n" +
          `"${sceneId}"\n\n` +
          "Check Summon scenes data inside index.html";
        booChoicesEl.innerHTML = "";
        const back = document.createElement("button");
        back.className = "btn";
        back.type = "button";
        back.textContent = "Back";
        back.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();
          const first = data?.meta?.firstScene || "summon_root_1";
          renderSummonScene(first);
        });
        booChoicesEl.appendChild(back);
        return;
      }

      state.summon.currentSceneId = sceneId;

      const hint =
        sceneId === "glow_1" ? "In‚Ä¶ and out‚Ä¶" :
        sceneId === "glow_2" ? "In‚Ä¶ gentle‚Ä¶ out‚Ä¶ soft‚Ä¶" :
        sceneId === "glow_3" ? "Last one‚Ä¶ in‚Ä¶ and out‚Ä¶" :
        "";
      setGlowVisible(isGlowScene(sceneId), hint);

      booLineEl.textContent = (scene.lines || []).map(fillTemplate).join("\n\n");

      booChoicesEl.innerHTML = "";
      (scene.choices || []).forEach((ch) => {
        const btn = document.createElement("button");
        btn.className = "btn";
        btn.type = "button";
        btn.textContent = ch.label;

        // ‚úÖ Prevent backdrop close / bubbling issues
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          e.stopPropagation();

          // Your JSON uses return_to_story -> Continue -> END_RETURN
          if (ch.goto === "END_RETURN") {
            closeSummonBoo(true);
            return;
          }
          renderSummonScene(ch.goto);
        });

        booChoicesEl.appendChild(btn);
      });
    }

    function openSummonBoo(){
      if (state.summon.overlayOpen) return;

      state.summon.overlayOpen = true;
      state.summon.previousFocus = document.activeElement;

      state.summon.previousVolume = themePlayer.volume;
      themePlayer.volume = Math.max(0.18, themePlayer.volume * 0.45);

      booOverlay.classList.remove("hidden");

      if (!state.summon.data || !state.summon.data.scenes) {
        // Shouldn't happen now, but keep a friendly fallback.
        state.summon.data = {
          meta: { firstScene: "error_1" },
          scenes: {
            error_1: {
              lines: [
                "Oops‚Ä¶ Boo can‚Äôt load Summon scenes.\n\n" +
                "The inlined scene data is missing.\n\n" +
                "Check SUMMON_SCENES_DATA in index.html"
              ],
              choices: [{ label: "Close", goto: "END_RETURN" }]
            }
          }
        };
      }

      const first = state.summon.data.meta?.firstScene || "summon_root_1";
      renderSummonScene(first);

      booCloseBtn.focus({ preventScroll: true });
    }

    function closeSummonBoo(restoreFocus){
      if (!state.summon.overlayOpen) return;

      state.summon.overlayOpen = false;
      booOverlay.classList.add("hidden");
      setGlowVisible(false);

      if (typeof state.summon.previousVolume === "number") {
        themePlayer.volume = state.summon.previousVolume;
      }

      if (restoreFocus && state.summon.previousFocus?.focus) {
        state.summon.previousFocus.focus({ preventScroll: true });
      }
    }

    function loadSummonScenes(){
      // ‚úÖ Inlined: no network call, no path issues, works on file:// too
      state.summon.data = SUMMON_SCENES_DATA;
    }

    // ‚úÖ Attach ONE reliable handler (use click, not pointerdown)
    summonLauncher.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      openSummonBoo();
    });

    booCloseBtn.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      closeSummonBoo(true);
    });

    // ‚úÖ Only close when the actual backdrop is clicked
    booOverlay.addEventListener("click", (e) => {
      if (e.target === booOverlay) closeSummonBoo(true);
    });

    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && state.summon.overlayOpen) {
        e.preventDefault();
        closeSummonBoo(true);
      }
    });

    // ======================
    // UI wiring
    // ======================
    document.getElementById("startBtn").addEventListener("click", () => {
      startThemeMusic();
      show("step2");
    });

    document.getElementById("backToWelcome").addEventListener("click", () => show("step1"));
    document.getElementById("backToName").addEventListener("click", () => show("step2"));
    document.getElementById("changeMood").addEventListener("click", () => show("step3"));

    document.getElementById("toMood").addEventListener("click", () => {
      const nm = cleanName(document.getElementById("nameInput").value);
      if(!nm) return;
      state.name = nm;
      localStorage.setItem("munchkin_name", nm);
      show("step3");
    });

    document.getElementById("step3").addEventListener("click", (e) => {
      const btn = e.target.closest("[data-mood]");
      if(!btn) return;

      state.mood = btn.getAttribute("data-mood");
      const story = pickStoryForMood(state.mood);

      if(!story){
        showNoStories(state.mood);
        show("step4");
        return;
      }

      if (story.type === "choose_your_own" && story.nodes && story.start) {
        startInteractiveStory(story);
        show("step4");
        return;
      }

      renderNormalStory(story);
      show("step4");
    });

    document.getElementById("anotherStory").addEventListener("click", () => {
      if (state.mood === "adventure") {
        const nextAdventure = pickAnotherAdventureStory();
        if (nextAdventure) startInteractiveStory(nextAdventure);
        return;
      }

      const story = pickStoryForMood(state.mood);
      if (!story) return;

      if (story.type === "choose_your_own" && story.nodes && story.start) {
        startInteractiveStory(story);
      } else {
        renderNormalStory(story);
      }
    });

    document.getElementById("restart").addEventListener("click", () => {
      state.name = "";
      state.mood = "";
      stopInteractiveStoryState();
      document.getElementById("nameInput").value = "";
      stopThemeMusic();
      closeSummonBoo(false);
      show("step1");
    });

    document.getElementById("nameInput").value = localStorage.getItem("munchkin_name") || "";
    document.getElementById("year").textContent = new Date().getFullYear();

    // Boot
    loadStories();
    loadSummonScenes();
    show("step1");
  </script>
</body>
</html>
